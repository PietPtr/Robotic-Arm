import sys
import pygame
import math

pygame.init()

size = width, height = 1280, 720
black = 0, 0, 0
grey = 100, 100, 100
white = 255, 255, 255
red = 255, 100, 100

screen = pygame.display.set_mode(size)

view = [0, 0]
zoom = 1

angles_list = [(131.702881, 203.562546),(130.573044, 203.515686),(129.455048, 203.437592),(128.349808, 203.328354),(127.258247, 203.188034),(126.181252, 203.016739),(125.119713, 202.814575),(124.074501, 202.581680),(123.046455, 202.318192),(122.036385, 202.024307),(121.045082, 201.700195),(120.073303, 201.346054),(119.121765, 200.962082),(118.191147, 200.548492),(117.282097, 200.105515),(116.395210, 199.633362),(115.531067, 199.132263),(114.690178, 198.602463),(113.873024, 198.044159),(113.080048, 197.457596),(112.311653, 196.842987),(111.568207, 196.200531),(110.850021, 195.530426),(110.157394, 194.832840),(109.490578, 194.107971),(108.849792, 193.355957),(108.235222, 192.576920),(107.647041, 191.770966),(107.085388, 190.938187),(106.550369, 190.078659),(106.042091, 189.192383),(105.560623, 188.279373),(105.106033, 187.339600),(104.678375, 186.372971),(104.277695, 185.379379),(103.904030, 184.358688),(103.557419, 183.310669),(103.237915, 182.235107),(102.945549, 181.131668),(102.680382, 180.000000),(102.442490, 178.839676),(102.231949, 177.650223),(102.048866, 176.431030),(101.893379, 175.181473),(101.765648, 173.900818),(101.665878, 172.588196),(101.594299, 171.242661),(101.551208, 169.863144),(101.536957, 168.448425),(101.551956, 166.997116),(101.596695, 165.507690),(101.671745, 163.978394),(101.777794, 162.407196),(101.915627, 160.791901),(102.086189, 159.129929),(102.290581, 157.418335),(102.530090, 155.653748),(102.806244, 153.832291),(103.120850, 151.949478),(103.476067, 150.000000),(103.874466, 147.977661),(104.319153, 145.875015),(104.813934, 143.683151),(105.363472, 141.391174),(105.973640, 138.985504),(106.651901, 136.449005),(107.407990, 133.759445),(108.254967, 130.887177),(109.210976, 127.791115),(110.302513, 124.411507),(111.570869, 120.655342),(113.087074, 116.362839),(114.994530, 111.211678),(117.692863, 104.303642)]
UPPER = 5
UNDER = 4
TO_DEG = 57.2957795

pointlists = []


def angles_to_points(shoulder, elbow):
    x1 = math.cos(math.radians(180 - shoulder)) * UPPER
    y1 = math.sin(math.radians(180 - shoulder)) * UNDER

    b = 180 - 90 - (180 - shoulder)
    a = math.radians(180 - b - elbow)
    x2 = x1 + math.cos(a) * UNDER;
    y2 = y1 + math.sin(a) * UNDER;

    scale = 35
    offset = (500, 600)
    points = [offset]
    points.append((offset[0] + x1 * scale, offset[1] + -y1 * scale))
    points.append((offset[0] + x2 * scale, offset[1] + -y2 * scale))

    return points


frame = 0
index = 0

while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT: sys.exit()
        if event.type == pygame.MOUSEBUTTONDOWN:
            if event.button == 1:
                index = (index + 1) % len(angles_list)
            if event.button == 2:
                index = (index - 1) % len(angles_list)

    """
    Updates and logic
    """
    mov = pygame.mouse.get_rel()
    if (pygame.mouse.get_pressed()[0]):
        view[0] += mov[0] * 1 / zoom
        view[1] += mov[1] * 1 / zoom

    """
    Drawing
    """
    screen.fill(black)

    angle = angles_list[int((frame / 5) % len(angles_list))]
    # angle = angles_list[index]

    pygame.draw.lines(screen, white, False, \
        angles_to_points(angle[0], angle[1]))

    pygame.draw.line(screen, grey, (500 + 35 * 5, 720), (500 + 35 * 5, 0))

    pygame.display.flip()
    frame += 1
